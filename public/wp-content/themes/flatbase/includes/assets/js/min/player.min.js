!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.Vimeo=e.Vimeo||{},e.Vimeo.Player=t())}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e,t,n){var r=_.get(e.element)||{};t in r||(r[t]=[]),r[t].push(n),_.set(e.element,r)}function n(e,t){var n=_.get(e.element)||{};return n[t]||[]}function r(e,t,n){var r=_.get(e.element)||{};if(!r[t])return!0;if(!n)return r[t]=[],_.set(e.element,r),!0;var i=r[t].indexOf(n);return i!==-1&&r[t].splice(i,1),_.set(e.element,r),r[t]&&0===r[t].length}function i(e,t){var i=n(e,t);if(i.length<1)return!1;var o=i.shift();return r(e,t,o),o}function o(e,t){var n=_.get(e);_.set(t,n),_.delete(e)}function u(e,t){return 0===e.indexOf(t.toLowerCase())?e:""+t.toLowerCase()+e.substr(0,1).toUpperCase()+e.substr(1)}function a(e){return e instanceof window.HTMLElement}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e}function c(e){return/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/.test(e)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.url,r=t||n;if(!r)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(s(r))return"https://vimeo.com/"+r;if(c(r))return r.replace("http:","https:");if(t)throw new TypeError("“"+t+"” is not a valid video id.");throw new TypeError("“"+r+"” is not a vimeo.com url.")}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return j.reduce(function(t,n){var r=e.getAttribute("data-vimeo-"+n);return(r||""===r)&&(t[n]=""===r?1:r),t},t)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,r){if(!c(e))throw new TypeError("“"+e+"” is not a vimeo.com url.");var i="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e);for(var o in t)t.hasOwnProperty(o)&&(i+="&"+o+"="+encodeURIComponent(t[o]));var u="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;u.open("GET",i,!0),u.onload=function(){if(404===u.status)return void r(new Error("“"+e+"” was not found."));if(403===u.status)return void r(new Error("“"+e+"” is not embeddable."));try{var t=JSON.parse(u.responseText);n(t)}catch(e){r(e)}},u.onerror=function(){var e=u.status?" ("+u.status+")":"";r(new Error("There was an error fetching the embed code from Vimeo"+e+"."))},u.send()})}function d(e,t){var n=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var r=document.createElement("div");return r.innerHTML=n,t.appendChild(r.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function e(t){"console"in window&&console.error&&console.error("There was an error creating an embed: "+t)};t.forEach(function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var t=l(e),r=f(t);h(r,t).then(function(t){return d(t,e)}).catch(n)}catch(e){n(e)}})}function p(e){return"string"==typeof e&&(e=JSON.parse(e)),e}function y(e,t,n){if(e.element.contentWindow.postMessage){var r={method:t};void 0!==n&&(r.value=n);var i=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));i>=8&&i<10&&(r=JSON.stringify(r)),e.element.contentWindow.postMessage(r,e.origin)}}function m(e,t){t=p(t);var o=[],u=void 0;if(t.event){if("error"===t.event){var a=n(e,t.data.method);a.forEach(function(n){var i=new Error(t.data.message);i.name=t.data.name,n.reject(i),r(e,t.data.method,n)})}o=n(e,"event:"+t.event),u=t.data}else if(t.method){var s=i(e,t.method);s&&(o.push(s),u=t.value)}o.forEach(function(t){try{if("function"==typeof t)return void t.call(e,u);t.resolve(u)}catch(e){}})}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var w="undefined"!=typeof Array.prototype.indexOf,k="undefined"!=typeof window.postMessage;if(!w||!k)throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},E=e(function(e,t){!function(e){function t(e,t){function r(e){return this&&this.constructor===r?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,void(e&&n.call(this,e))):new r(e)}return t||w(e,"size",{get:y}),e.constructor=r,r.prototype=e,r}function n(e){var t;this.add?e.forEach(this.add,this):e.forEach(function(e){this.set(e[0],e[1])},this)}function r(e){return this.has(e)&&(this._keys.splice(g,1),this._values.splice(g,1),this._itp.forEach(function(e){g<e[0]&&e[0]--})),-1<g}function i(e){return this.has(e)?this._values[g]:void 0}function o(e,t){if(this.objectOnly&&t!==Object(t))throw new TypeError("Invalid value used as weak collection key");if(t!=t||0===t)for(g=e.length;g--&&!k(e[g],t););else g=e.indexOf(t);return-1<g}function u(e){return o.call(this,this._values,e)}function a(e){return o.call(this,this._keys,e)}function s(e,t){return this.has(e)?this._values[g]=t:this._values[this._keys.push(e)-1]=t,this}function c(e){return this.has(e)||this._values.push(e),this}function f(){(this._keys||0).length=this._values.length=0}function l(){return p(this._itp,this._keys)}function h(){return p(this._itp,this._values)}function d(){return p(this._itp,this._keys,this._values)}function v(){return p(this._itp,this._values,this._values)}function p(e,t,n){var r=[0],i=!1;return e.push(r),{next:function o(){var u,a=r[0];return!i&&a<t.length?(u=n?[t[a],n[a]]:t[a],r[0]++):(i=!0,e.splice(e.indexOf(r),1)),{done:i,value:u}}}}function y(){return this._values.length}function m(e,t){for(var n=this.entries();;){var r=n.next();if(r.done)break;e.call(t,r.value[1],r.value[0],this)}}var g,w=Object.defineProperty,k=function e(t,n){return t===n||t!==t&&n!==n};"undefined"==typeof WeakMap&&(e.WeakMap=t({delete:r,clear:f,get:i,has:a,set:s},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(e.Map=t({delete:r,has:a,get:i,set:s,keys:l,values:h,entries:d,forEach:m,clear:f})),"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=t({has:u,add:c,delete:r,clear:f,keys:h,values:h,entries:v,forEach:m})),"undefined"==typeof WeakSet&&(e.WeakSet=t({delete:r,add:c,clear:f,has:u},!0))}("undefined"!=typeof t&&"undefined"!=typeof b?b:window)}),T=e(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function t(n,r,i){r[n]=r[n]||i(),"undefined"!=typeof e&&e.exports?e.exports=r[n]:"function"==typeof define&&define.amd&&define(function e(){return r[n]})}("Promise","undefined"!=typeof b?b:b,function e(){function n(e,t){v.add(e,t),d||(d=y(v.drain))}function r(e){var n,r="undefined"==typeof e?"undefined":t(e);return null==e||"object"!=r&&"function"!=r||(n=e.then),"function"==typeof n&&n}function i(){for(var e=0;e<this.chain.length;e++)o(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function o(e,t,n){var i,o;try{t===!1?n.reject(e.msg):(i=t===!0?e.msg:t.call(void 0,e.msg),i===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=r(i))?o.call(i,n.resolve,n.reject):n.resolve(i))}catch(e){n.reject(e)}}function u(e){var t,o=this;if(!o.triggered){o.triggered=!0,o.def&&(o=o.def);try{(t=r(e))?n(function(){var n=new c(o);try{t.call(e,function e(){u.apply(n,arguments)},function e(){a.apply(n,arguments)})}catch(e){a.call(n,e)}}):(o.msg=e,o.state=1,o.chain.length>0&&n(i,o))}catch(e){a.call(new c(o),e)}}}function a(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&n(i,t))}function s(e,t,n,r){for(var i=0;i<t.length;i++)!function i(o){e.resolve(t[o]).then(function e(t){n(o,t)},r)}(i)}function c(e){this.def=e,this.triggered=!1}function f(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new f(this);this.then=function e(r,o){var u={success:"function"!=typeof r||r,failure:"function"==typeof o&&o};return u.promise=new this.constructor(function e(t,n){if("function"!=typeof t||"function"!=typeof n)throw TypeError("Not a function");u.resolve=t,u.reject=n}),t.chain.push(u),0!==t.state&&n(i,t),u.promise},this.catch=function e(t){return this.then(void 0,t)};try{e.call(void 0,function e(n){u.call(t,n)},function e(n){a.call(t,n)})}catch(e){a.call(t,e)}}var h,d,v,p=Object.prototype.toString,y="undefined"!=typeof setImmediate?function e(t){return setImmediate(t)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function e(t,n,r,i){return Object.defineProperty(t,n,{value:r,writable:!0,configurable:i!==!1})}}catch(e){h=function e(t,n,r){return t[n]=r,t}}v=function e(){function t(e,t){this.fn=e,this.self=t,this.next=void 0}var n,r,i;return{add:function e(o,u){i=new t(o,u),r?r.next=i:n=i,r=i,i=void 0},drain:function e(){var t=n;for(n=r=d=void 0;t;)t.fn.call(t.self),t=t.next}}}();var m=h({},"constructor",l,!1);return l.prototype=m,h(m,"__NPO__",0,!1),h(l,"resolve",function e(n){var r=this;return n&&"object"==("undefined"==typeof n?"undefined":t(n))&&1===n.__NPO__?n:new r(function e(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(n)})}),h(l,"reject",function e(t){return new this(function e(n,r){if("function"!=typeof n||"function"!=typeof r)throw TypeError("Not a function");r(t)})}),h(l,"all",function e(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):0===t.length?n.resolve([]):new n(function e(r,i){if("function"!=typeof r||"function"!=typeof i)throw TypeError("Not a function");var o=t.length,u=Array(o),a=0;s(n,t,function e(t,n){u[t]=n,++a===o&&r(u)},i)})}),h(l,"race",function e(t){var n=this;return"[object Array]"!=p.call(t)?n.reject(TypeError("Not an array")):new n(function e(r,i){if("function"!=typeof r||"function"!=typeof i)throw TypeError("Not a function");s(n,t,function e(t,n){r(n)},i)})}),l})}),_=new WeakMap,j=["id","url","width","maxwidth","height","maxheight","portrait","title","byline","color","autoplay","autopause","loop","responsive"],M=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=new WeakMap,A=new WeakMap,N=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(this,e),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),"string"==typeof t&&(t=document.getElementById(t)),!a(t))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==t.nodeName){var i=t.querySelector("iframe");i&&(t=i)}if("IFRAME"===t.nodeName&&!c(t.getAttribute("src")||""))throw new Error("The player element passed isn’t a Vimeo embed.");if(x.has(t))return x.get(t);this.element=t,this.origin="*";var u=new T(function(e,i){var u=function t(r){if(c(r.origin)&&n.element.contentWindow===r.source){"*"===n.origin&&(n.origin=r.origin);var i=p(r.data),o="event"in i&&"ready"===i.event,u="method"in i&&"ping"===i.method;return o||u?(n.element.setAttribute("data-ready","true"),void e()):void m(n,i)}};if(window.addEventListener?window.addEventListener("message",u,!1):window.attachEvent&&window.attachEvent("onmessage",u),"IFRAME"!==n.element.nodeName){var a=l(t,r),s=f(a);h(s,a).then(function(e){var r=d(e,t);return n.element=r,o(t,r),e}).catch(function(e){return i(e)})}});return A.set(this,u),x.set(this.element,this),"IFRAME"===this.element.nodeName&&y(this,"ping"),this}return M(e,[{key:"callMethod",value:function e(n){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new T(function(e,o){return r.ready().then(function(){t(r,n,{resolve:e,reject:o}),y(r,n,i)})})}},{key:"get",value:function e(n){var r=this;return new T(function(e,i){return n=u(n,"get"),r.ready().then(function(){t(r,n,{resolve:e,reject:i}),y(r,n)})})}},{key:"set",value:function e(n,r){var i=this;return T.resolve(r).then(function(e){if(n=u(n,"set"),void 0===e||null===e)throw new TypeError("There must be a value to set.");return i.ready().then(function(){return new T(function(r,o){t(i,n,{resolve:r,reject:o}),y(i,n,e)})})})}},{key:"on",value:function e(r,i){if(!r)throw new TypeError("You must pass an event name.");if(!i)throw new TypeError("You must pass a callback function.");if("function"!=typeof i)throw new TypeError("The callback must be a function.");var o=n(this,"event:"+r);0===o.length&&this.callMethod("addEventListener",r).catch(function(){}),t(this,"event:"+r,i)}},{key:"off",value:function e(t,n){if(!t)throw new TypeError("You must pass an event name.");if(n&&"function"!=typeof n)throw new TypeError("The callback must be a function.");var i=r(this,"event:"+t,n);i&&this.callMethod("removeEventListener",t).catch(function(e){})}},{key:"loadVideo",value:function e(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function e(){var t=A.get(this);return T.resolve(t)}},{key:"addCuePoint",value:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:n})}},{key:"removeCuePoint",value:function e(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function e(t,n){if(!t)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:t,kind:n})}},{key:"disableTextTrack",value:function e(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function e(){return this.callMethod("pause")}},{key:"play",value:function e(){return this.callMethod("play")}},{key:"unload",value:function e(){return this.callMethod("unload")}},{key:"getAutopause",value:function e(){return this.get("autopause")}},{key:"setAutopause",value:function e(t){return this.set("autopause",t)}},{key:"getColor",value:function e(){return this.get("color")}},{key:"setColor",value:function e(t){return this.set("color",t)}},{key:"getCuePoints",value:function e(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function e(){return this.get("currentTime")}},{key:"setCurrentTime",value:function e(t){return this.set("currentTime",t)}},{key:"getDuration",value:function e(){return this.get("duration")}},{key:"getEnded",value:function e(){return this.get("ended")}},{key:"getLoop",value:function e(){return this.get("loop")}},{key:"setLoop",value:function e(t){return this.set("loop",t)}},{key:"getPaused",value:function e(){return this.get("paused")}},{key:"getTextTracks",value:function e(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function e(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function e(){return this.get("videoId")}},{key:"getVideoTitle",value:function e(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function e(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function e(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function e(){return this.get("videoUrl")}},{key:"getVolume",value:function e(){return this.get("volume")}},{key:"setVolume",value:function e(t){return this.set("volume",t)}}]),e}();return v(),N});