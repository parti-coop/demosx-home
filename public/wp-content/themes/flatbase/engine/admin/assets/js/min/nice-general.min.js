function nice_tumblog_fix_css(){jQuery("#nice-metabox").addClass("nice-row"),$row=jQuery("div.format-settings:visible:last",""),$row.addClass("border-bottom-none")}function nice_tumblogStandard(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_video-info").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_embed").show(),nice_tumblog_fix_css()}function nice_tumblogAside(){jQuery("div#setting_video-info").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_aside-info").show(),jQuery("div#setting_embed").show(),nice_tumblog_fix_css()}function nice_tumblogVideo(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_video-info").show(),jQuery("div#setting_embed").show(),nice_tumblog_fix_css()}function nice_tumblogImage(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_video-info").hide(),jQuery("div#setting_embed").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_image-info").show(),nice_tumblog_fix_css()}function nice_tumblogQuote(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_video-info").hide(),jQuery("div#setting_embed").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_quote-info").show(),jQuery("div#setting_quote").show(),jQuery("div#setting_quote-author").show(),nice_tumblog_fix_css()}function nice_tumblogLink(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_video-info").hide(),jQuery("div#setting_embed").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_link-info").show(),jQuery("div#setting_link").show(),nice_tumblog_fix_css()}function nice_tumblogGallery(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_video-info").hide(),jQuery("div#setting_embed").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_audio-info").hide(),jQuery("div#setting_audio_mp3").hide(),jQuery("div#setting_audio_oga").hide(),jQuery("div#setting_gallery-info").show(),nice_tumblog_fix_css()}function nice_tumblogAudio(){jQuery("div#setting_aside-info").hide(),jQuery("div#setting_video-info").hide(),jQuery("div#setting_embed").hide(),jQuery("div#setting_image-info").hide(),jQuery("div#setting_quote").hide(),jQuery("div#setting_quote-author").hide(),jQuery("div#setting_quote-info").hide(),jQuery("div#setting_link").hide(),jQuery("div#setting_link-info").hide(),jQuery("div#setting_gallery-info").hide(),jQuery("div#setting_audio-info").show(),jQuery("div#setting_audio_mp3").show(),jQuery("div#setting_audio_oga").show(),nice_tumblog_fix_css()}var NiceFrameworkGeneral=function($){"use strict";var i=function(){$(document).on("click",".nice-framework-admin-ui-radio-image",function(){$(this).closest(".type-radio-image").find(".nice-framework-admin-ui-radio-image").removeClass("nice-framework-admin-ui-radio-image-selected"),$(this).toggleClass("nice-framework-admin-ui-radio-image-selected"),$(this).parent().find(".nice-framework-admin-ui-radio").prop("checked",!0).trigger("change")})},e=function(){$(".nice-color:not(.delay)").each(function(){t($(this))})},t=function(i){i.hasClass("nice-color-opacity")?i.wpColorPickerOpacity().addClass("color-picker-loaded"):i.wpColorPicker({change:_.throttle(function(){$(this).trigger("change"),$(".nice-select-color ."+$(this).attr("name")).css("background",$(this).val())},3e3)}).addClass("color-picker-loaded")},n=function(){var i=$(".nice-admin-filter");i.each(function(){var i=$(this);i.hover(function(){$(window).width()>749&&$(this).children("ul").fadeIn().addClass("active")},function(){$(window).width()>749&&$(this).children("ul").fadeOut().removeClass("active")}),i.click(function(i){$(window).width()<=749&&(i.preventDefault(),$(this).children("ul").hasClass("active")?$(this).children("ul").fadeOut().removeClass("active"):$(this).children("ul").fadeIn().addClass("active"))}),$(window).resize(function(){$(window).width()>749&&i.children("ul").hasClass("active")&&i.children("ul").hide().removeClass("active")})})},a=function(){var i=$(".nice-admin-filter a.filter");i.each(function(){var i=$(this),e=i.closest(".nice-admin-filter").find(".sort-items span");i.click(function(i){i.preventDefault(),e.html($(this).html())})})},o=function(){var i;window.formfield="",$("body").on("click",".nice_upload_button",function(e){e.preventDefault();var t=$(this).prev("input").attr("id");i=wp.media.frames.file_frame=wp.media({title:generalData.add_media_title,button:{text:generalData.use_this_file},multiple:"0"===$(this).data("multiple")}),i.on("menu:render:default",function(i){var e={};i.unset("library-separator"),i.unset("gallery"),i.unset("featured-image"),i.unset("embed"),i.set(e)}),i.on("select",function(){var e=i.state().get("selection");e.each(function(i,e){if(i=i.toJSON(),0===e){$("#"+t).val(i.url);var n="",a=i.mime,o=/^image\/(?:jpe?g|png|gif|x-icon)$/i;a.match(o)&&(n='<img src="'+i.url+'" />'),n+='<a href="#" class="nice-upload-remove">'+generalData.remove_media_text+"</a>",$("#"+t).siblings(".screenshot").slideDown().html(n)}f()})}),i.open()}),$("body").on("click",".nice-upload-remove",function(i){return i.preventDefault(),jQuery(this).hide(),jQuery(this).parents().parents().children(".nice-upload").attr("value",""),jQuery(this).parents(".screenshot").slideUp(),f(),!1})},d=function(){$("#nice-metaboxes-tabs").tabs(),$(".nice-tabs").tabs()},s=function(){var i=$(".nice-accordion");i.length&&i.accordion({collapsible:!0,heightStyle:"content"})},r=function(){$(".nice-tooltip").tooltip({items:"img, a, input, select",position:{my:"center bottom-15",at:"center top",using:function(i,e){$(this).css(i),$("<div>").addClass("arrow").addClass(e.vertical).addClass(e.horizontal).appendTo(this)}},content:function(){var i=$(this),e;return i.is("[title]")&&(e=i.attr("title")),i.is("img")&&(e=i.attr("alt")),e}})},u=function(){var i=$(".nice-toggle");i.length&&i.each(function(){"closed"==$(this).attr("data-id")?$(this).accordion({header:".nice-toggle-title",collapsible:!0,active:!1}):$(this).accordion({header:".nice-toggle-title",collapsible:!0})})},c=function(){$(".fancybox").fancybox({padding:0})},l=function(){return'select, input[type="radio"]:checked, input[type="text"], input[type="hidden"], input[type="checkbox"]'},h=function(i){for(var e,t=/(.+?):(is|not|contains|less_than|less_than_or_equal_to|greater_than|greater_than_or_equal_to)\((.*?)\),?/g,n=[];e=t.exec(i);)n.push({check:e[1],rule:e[2],value:e[3]||""});return n},f=function(){$('.format-settings[id^="setting_"][data-condition]').each(function(){var i,e=h($(this).data("condition")),t=($(this).data("operator")||"and").toLowerCase();$.each(e,function(e,n){var a=$("#setting_"+n.check),o=!!a.length&&a.find(l()).first();if(a.length&&(o.length||""===n.value.toString())){if("checkbox"===o.attr("type"))var d=o.is(":checked").toString();else var d=o.length?o.val().toString():"";var s=n.value.toString(),r;switch(n.rule){case"less_than":r=parseInt(d)<parseInt(s);break;case"less_than_or_equal_to":r=parseInt(d)<=parseInt(s);break;case"greater_than":r=parseInt(d)>parseInt(s);break;case"greater_than_or_equal_to":r=parseInt(d)>=parseInt(s);break;case"contains":r=d.indexOf(s)!==-1;break;case"is":r=d===s;break;case"not":r=d!==s}switch("undefined"==typeof i&&(i=r),t){case"or":i=i||r;break;case"and":default:i=i&&r}}}),i?$(this).animate({opacity:"show",height:"show"},200):$(this).animate({opacity:"hide",height:"hide"},200);var n=$(this);setTimeout(function(){n.trigger("NiceSettingToggled")},200),i=null})},g=function(){var i=function(){var i=0;return function(e,t){clearTimeout(i),i=setTimeout(e,t)}}();$('.format-settings[id^="setting_"]').on("change.conditionals, keyup.conditionals",l(),function(e){"keyup"===e.type?i(function(){f()},500):f()}),f()},v=function(){var i=$(".nice-framework-admin-ui-list-item");i.each(function(i,e){"undefined"!==$(e).data("js-callback")&&m($(this))})},m=function(i){var e=window.generalData.listItemMessages;i.is(".editable")&&i.append('<a href="javascript:void(0);" class="add-new button"><i class="bi_interface-plus"></i> '+e.addOption+"</a>"),$("body").append('<div id="'+i.attr("id")+'_model-container" style="display: none;"></div>');var n=i.find("li.html-model"),a=$("#"+i.attr("id")+"_model-container"),o=i.find("li.section-list_item:last").parent(),d=o.find("li.section-list_item:not(:last)"),s=i.find("a.add-new"),r=i.find("input.section-data"),u=i.data("user-item-prefix"),c={},l=function(){c=h(),a.append(n),d.each(function(i,e){v(e)}),s.click(Q),i.is(".sortable")&&o.sortable({handle:"h4.heading",stop:g})},h=function(){return JSON.parse(atob(r.val()))},f=function(){var i={};return"undefined"==typeof c&&(c=h()),o.find("li.section-list_item").each(function(){var e=$(this);e.data("slug")&&"undefined"!=typeof c[e.data("slug")]&&(i[e.data("slug")]=e.data("name"))}),i},g=function(){c=f(),r.val(btoa(JSON.stringify(c)))},v=function(i){var e=$(i),t=e.find(".nice-option-name input.nice-input");t.addClass("nice-input-option-name"),e.$fields=e.find(".nice-input:not(.nice-input-option-name), .nice-color"),e.$fields.length&&e.$fields.each(function(){$(this).data("slug",$(this).attr("name"))}),_(e),e.find(".nice-option-name input.nice-input").keyup(function(){m($(this),e)}),e.find(".save-option").click(function(){$(this).hasClass("button-disabled")||y(e)}),e.find(".remove-option").click(function(){j(e)}),e.find(".edit-option").click(function(){p($(this),e)})},_=function(e){var t=e.find("h4 label");e.append('<div class="option-menu"></div>');var n=e.find(".option-menu");n.append('<span class="field-valid-message"></span>'),i.is(".editable")&&!e.data("blocked")&&n.append('<a href="javascript:void(0);" class="save-option button button-primary button-disabled"><i class="bi_interface-tick"></i></a>'),n.append('<a href="javascript:void(0);" class="edit-option button"><i class="bi_editorial-pencil"></i></a>'),i.is(".editable")&&!e.data("blocked")&&n.append('<a href="javascript:void(0);" class="remove-option button"><i class="bi_editorial-trash"></i></a>')},m=function(i,t){var n=t.find("h4 label"),a="undefined"!=typeof t.data("name")?t.data("name").trim():"",o=a?a:e.newOptionName,d=i.val().trim()?i.val().trim():o;d&&d!==a&&t.find(".save-option").hasClass("button-disabled")&&(t.find(".save-option").removeClass("button-disabled"),t.find(".field-valid-message").html(e.validateOptionName)),d&&d!==a&&d!==o||t.find(".save-option").hasClass("button-enabled")||(t.find(".save-option").addClass("button-disabled"),i.val().trim()?t.find(".field-valid-message").html():t.find(".field-valid-message").html(e.enterOptionName)),n.html(d)},p=function(i,e){e.find("ul:first").toggle(),i.toggleClass("active")},y=function(i){var t=i.find(".nice-option-name input.nice-input"),n=u+"_"+t.val().toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"_").trim(),a="undefined"!=typeof c[i.data("slug")],o="undefined"!=typeof c[i.data("name")];return t.val()?a||"undefined"==typeof c[n]?a&&"undefined"!=typeof c[n]&&n!==i.data("slug")?(alert(e.optionNameExists),void t.val(i.data("name")).focus().keyup()):(a&&o&&c[i.data("name")]===t.val()||(delete c[i.data("slug")],i.data("default")||i.data("blocked")?c[i.data("slug")]=t.val():(c[n]=t.val(),i.data("slug",n),i.$fields.each(function(){var i,e;"default"===$(this).data("slug")?(i=n,e=n):(i=n+"_"+$(this).data("slug"),e=n+"_"+$(this).data("slug")),$(this).attr("id",i),$(this).attr("name",e)})),i.data("name",t.val()),g(),i.find(".save-option").addClass("button-disabled"),i.find(".field-valid-message").html(e.validOptionName)),void(a||s.is(":visible")||s.show())):(alert(e.optionNameExists),void t.val("").focus().keyup()):(alert(e.enterOptionName),void t.focus())},j=function(i){if(confirm(e.confirmRemoveOption)){var t=i.data("slug");i.remove(),t?g():s.show()}},Q=function(){var i=n.clone().removeClass("html-model"),a=i.find(".nice-color"),d=i.find("h4 label");d.html(e.newOptionName),o.append(i),a.each(function(){t($(this))}),v(i),i.find("h4.heading").addClass("ui-sortable-handle"),i.find(".edit-option").click(),$(this).hide()};l()},p=function(){var i=$(".nice-input.nice-select-color");i.each(function(){y(this)})},y=function(i){var e=$(i),t=e.find(".nice-color-select-placeholder"),n=e.find(".nice-color-select-options"),a=e.find(".option:not(.nice-color-select-placeholder)"),o=e.find("input.nice-input"),d,s=function(i,a){t.html(i.html()),n.hide(),t=e.find(".nice-color-select-placeholder"),d=a};n.hide(),t.click(function(){n.toggle()}),a.each(function(){var i=$(this),e=i.data("value");i.data("selected")&&s(i,e),i.click(function(){s($(this),e),o.val(e)})})},j=function(){var i=$("#niceform");i.on("NiceOptionsUpdated",Q)},Q=function(){var i=$(".nice-input.nice-select-color"),e=[];i.length&&(i.each(function(){$(this).data("id")&&e.push($(this).data("id"))}),e.length&&$.ajax({method:"POST",url:window.ajaxurl,data:{action:"nice_option_update_select_color",nonce:window.generalData.playNiceNonce,selectors:e},success:function(e){e=JSON.parse(e),i.each(function(){$(this).data("id")&&"undefined"!=typeof e[$(this).data("id")]&&$(this).replaceWith(e[$(this).data("id")])}),p()}}))},b=function(){$(".format-settings").bind("NiceSettingToggled",function(i){var e=$(this).parent(),t=e.prev(".nice-group-title"),n=!1;e.children(".format-settings").each(function(){if("none"!==$(this).css("display"))return void(n=!0)}),n?t.show():t.hide()})},k=function(){g(),o(),i(),e(),r(),d(),s(),u(),c(),n(),a(),v(),p(),j(),b()};return{ready:k,initSelectColor:p}}(jQuery);jQuery(NiceFrameworkGeneral.ready),jQuery(document).ready(function(){jQuery("#post-format-0").is(":checked")&&nice_tumblogStandard(),jQuery("#post-format-0").click(nice_tumblogStandard),jQuery("#post-format-aside").is(":checked")&&nice_tumblogAside(),jQuery("#post-format-aside").click(nice_tumblogAside),jQuery("#post-format-video").is(":checked")&&nice_tumblogVideo(),jQuery("#post-format-video").click(nice_tumblogVideo),jQuery("#post-format-image").is(":checked")&&nice_tumblogImage(),jQuery("#post-format-image").click(nice_tumblogImage),jQuery("#post-format-quote").is(":checked")&&nice_tumblogQuote(),jQuery("#post-format-quote").click(nice_tumblogQuote),jQuery("#post-format-link").is(":checked")&&nice_tumblogLink(),jQuery("#post-format-link").click(nice_tumblogLink),jQuery("#post-format-gallery").is(":checked")&&nice_tumblogGallery(),jQuery("#post-format-gallery").click(nice_tumblogGallery),jQuery("#post-format-audio").is(":checked")&&nice_tumblogAudio(),jQuery("#post-format-audio").click(nice_tumblogAudio)}),jQuery("body").addClass("mobile");