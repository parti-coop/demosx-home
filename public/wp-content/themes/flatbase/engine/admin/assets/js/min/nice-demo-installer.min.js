var NiceDemoInstaller=function($){"use strict";var e=function(){jQuery.fn.niceTextRotator=function(e){var a=0,t=-1,s=function(e){for(var a=e.length,t,s;0!==a;)s=Math.floor(Math.random()*a),a-=1,t=e[a],e[a]=e[s],e[s]=t;return e};return s(e.secondary),this.each(function(){var s=$(this),n=function(){var n=e.primary;s.fadeOut(0,function(){0===a%2?(t+1===e.secondary.length&&(t=-1),n=e.secondary[t+1],t++,s.addClass("random-importing-message")):s.removeClass("random-importing-message"),s.text(n).fadeIn("slow"),a++})};setInterval(n,4e3)})},jQuery(".nice-install-demos .button-call-warning").click(function(){var e=jQuery(this).data("demo-slug");return jQuery("#TB_closeWindowButton").click(),setTimeout(function(){jQuery("#button-warning-"+e).click()},300),!1}),jQuery(".nice-install-demos .button-cancel").click(function(){return jQuery("#TB_closeWindowButton").click(),!1}),jQuery(".demo-install .button-install").click(function(){var e=jQuery(this);if(e.attr("disabled"))return!1;if(e.data("demo-exceptions")){var a=confirm(generalData.installAnyway);if(!a)return!1}var t=e.data("demo-slug"),s=jQuery("#checkbox-reset-"+t).prop("checked"),n=jQuery("body"),r=jQuery(".nice-demo-import-overlay"),o=jQuery(".nice-demo-import-window"),i=jQuery("#nice-demo-import-loader"),c=jQuery("#nice-demo-import-results");i.removeClass(),c.html(""),n.addClass("modal-open"),r.show(),o.show();var l="",d=generalData.message_processing,u={action:"nice_theme_import_demo_pack",demo_slug:t,obtain_status:!0,reset_site:s,nice_demo_import_nonce:generalData.playNiceNonce},m=function(){i.removeClass(),""!==l&&i.addClass(l);var e=[],a=d;"undefined"!=typeof generalData.random_messages&&0<generalData.random_messages.length&&(e=generalData.random_messages,a='<span class="importing-messages">'+a+"</span>"),c.hide().html(a).fadeIn("slow"),0<e.length&&jQuery(".importing-messages").niceTextRotator({primary:d,secondary:e})},g=function(e){var a=JSON.parse(e),t="";t=a.message?a.message:generalData.message_success,c.hide().html(t).fadeIn("slow"),1===a.more?(_.data.obtain_status=!1,_.data.reset_site=!1,l=""!==a.next_step?"demo-step-"+a.next_step:"",a.total_posts_number&&(_.data.total_posts_number=a.total_posts_number),a.processed_posts_number&&(_.data.processed_posts_number=a.processed_posts_number),d=""!==a.next_step_message?a.next_step_message:generalData.message_processing,setTimeout(function(){y(_)},4e3)):1===a.error?i.addClass("demo-error"):i.addClass("demo-success")},p=function(){i.addClass("demo-error"),c.hide().html(generalData.message_error).fadeIn("slow")},_={type:"POST",url:generalData.adminAjaxURL,data:u,beforeSend:m,success:g,error:p},y=function(e){console.log(e),$.ajax(e)};return y(_),!1}),jQuery(document).ready(function(){jQuery(".nice-install-demos .item.current .button-call-details").click()})},a=function(){e()};return{ready:a}}(jQuery);jQuery(NiceDemoInstaller.ready);